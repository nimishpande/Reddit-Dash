name: Secret Test

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Python Setup
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: Test Reddit Client ID
      run: |
        echo "Testing REDDIT_CLIENT_ID..."
        if [ -n "${{ secrets.REDDIT_CLIENT_ID }}" ]; then
          echo "✅ REDDIT_CLIENT_ID is set (length: ${#REDDIT_CLIENT_ID})"
        else
          echo "❌ REDDIT_CLIENT_ID is missing"
        fi
        
    - name: Test Reddit Client Secret
      run: |
        echo "Testing REDDIT_CLIENT_SECRET..."
        if [ -n "${{ secrets.REDDIT_CLIENT_SECRET }}" ]; then
          echo "✅ REDDIT_CLIENT_SECRET is set (length: ${#REDDIT_CLIENT_SECRET})"
        else
          echo "❌ REDDIT_CLIENT_SECRET is missing"
        fi
        
    - name: Test Git Token
      run: |
        echo "Testing GIT_TOKEN..."
        if [ -n "${{ secrets.GIT_TOKEN }}" ]; then
          echo "✅ GIT_TOKEN is set (length: ${#GIT_TOKEN})"
        else
          echo "❌ GIT_TOKEN is missing"
        fi
        
    - name: Test All Secrets
      run: |
        echo "Testing all secrets together..."
        echo "REDDIT_CLIENT_ID=${{ secrets.REDDIT_CLIENT_ID }}" > .env
        echo "REDDIT_CLIENT_SECRET=${{ secrets.REDDIT_CLIENT_SECRET }}" >> .env
        echo "GIT_TOKEN=${{ secrets.GIT_TOKEN }}" >> .env
        echo "Environment file created with all secrets"
        
    - name: Success
      run: |
        echo "🎉 Secret test complete!"
